import{a as O,_ as U,b as I,c as $}from"./axios-DnED3vf-.js";import{d as z,r as u,c as w,a as o,w as l,F as h,o as c,b as a,t as r,e as N,f as V,g as R}from"./index-UVwtfYOY.js";import{_ as H,a as T,b as q,N as A,c as G}from"./headers-5njuwPic.js";const J={style:{display:"flex","justify-content":"space-between"}},Y=z({__name:"RecordView",setup(K){const f=u(""),d=t=>t.slice(t.indexOf("#")+1,t.indexOf("#")+18),m=u([]),y=u([]);function S(t){y.value=m.value.filter(e=>e.sw.includes(t)||e.name.includes(t)||e.nickname&&e.nickname.includes(t)).map(e=>{const x=["🦑","🐙"][Math.floor(Math.random()*2)],s="#"+e.sw+"@"+e.name+(e.nickname?x+e.nickname:"");return{label:s,value:s}})}function W(t){y.value=[],m.value.length===0?O.get("/splatoon/public/json/user.json").then(function(e){m.value=e.data,S(t)}).catch(function(e){console.log(e)}).finally(function(){}):S(t)}const g=u([]),v=u([]);function M(t){v.value=g.value.filter(e=>e.win.includes(d(t))||e.lose.includes(d(t))).map(e=>({result:e.win.includes(d(t))?"win":"lose",...e}))}function D(t){g.value.length===0?O.get("/splatoon/public/json/record.json").then(function(e){g.value=e.data,M(t)}).catch(function(e){console.log(e)}).finally(function(){}):M(t)}const b=u(!1),i=u();function B(t){var e;return(e=m.value.find(p=>p.sw===t))==null?void 0:e.name}function E(t){i.value=t,b.value=!0}return(t,e)=>{const p=U,x=H,s=I,F=$,j=G,k=T,C=A,L=q;return c(),w(h,null,[o(p,null,{default:l(()=>[a("可以通过输入SW码、玩家名称、昵称来查询。")]),_:1}),o(x,{value:f.value,"onUpdate:value":[e[0]||(e[0]=n=>f.value=n),W],"input-props":{autocomplete:"disabled"},options:y.value,placeholder:"例：“小白”",clearable:"",onSelect:D},null,8,["value","options"]),o(p,null,{default:l(()=>[a(" 胜率统计： "),o(s,null,{default:l(()=>[a(r(v.value.filter(n=>(n==null?void 0:n.result)==="win").length+"/"+v.value.length),1)]),_:1})]),_:1}),o(k,{bordered:"",hoverable:"",clickable:""},{default:l(()=>[(c(!0),w(h,null,N(v.value,n=>(c(),V(j,{onClick:_=>E(n)},{default:l(()=>[R("div",J,[o(F,{bordered:!1,type:n.result==="win"?"success":void 0,size:"small"},{default:l(()=>[a(r(n.result==="win"?"WIN!":"LOSE..."),1)]),_:2},1032,["type"]),R("div",null,r(n.datetime),1)])]),_:2},1032,["onClick"]))),256))]),_:1}),o(L,{style:{width:"80%","max-width":"750px"},show:b.value,"onUpdate:show":e[1]||(e[1]=n=>b.value=n),class:"custom-card",preset:"card",title:"对战详情",bordered:!1},{default:l(()=>[o(C,{style:{display:"flex","justify-content":"space-between"}},{default:l(()=>[o(s,{type:"success"},{default:l(()=>[a("WIN!")]),_:1}),o(s,{type:"success"},{default:l(()=>{var n;return[a(r((n=i.value)==null?void 0:n.score.win)+"%",1)]}),_:1})]),_:1}),o(k,{bordered:""},{default:l(()=>{var n;return[(c(!0),w(h,null,N((n=i.value)==null?void 0:n.win,_=>(c(),V(j,null,{default:l(()=>[o(s,{type:_===d(f.value)?"success":"default"},{default:l(()=>[a(r(B(_)),1)]),_:2},1032,["type"])]),_:2},1024))),256))]}),_:1}),o(C,{style:{display:"flex","justify-content":"space-between"}},{default:l(()=>[o(s,{type:"error"},{default:l(()=>[a("LOSE...")]),_:1}),o(s,{type:"error"},{default:l(()=>{var n;return[a(r((n=i.value)==null?void 0:n.score.lose)+"%",1)]}),_:1})]),_:1}),o(k,{bordered:""},{default:l(()=>{var n;return[(c(!0),w(h,null,N((n=i.value)==null?void 0:n.lose,_=>(c(),V(j,null,{default:l(()=>[o(s,{type:_===d(f.value)?"error":"default"},{default:l(()=>[a(r(B(_)),1)]),_:2},1032,["type"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["show"])],64)}}});export{Y as default};
